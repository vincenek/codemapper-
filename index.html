<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chart Bot - News Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --primary: #3a86ff;
            --secondary: #8338ec;
            --text: #333333;
            --light-text: #6c757d;
            --border: #e0e0e0;
            --user-bubble: #3a86ff;
            --bot-bubble: #e9ecef;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 10;
        }

        .container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .sidebar {
            width: 300px;
            background-color: var(--card-bg);
            border-right: 1px solid var(--border);
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chart-container {
            padding: 1rem;
            height: 45%;
            background-color: var(--card-bg);
            margin: 0.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 0.5rem;
            background-color: var(--card-bg);
            margin: 0.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .message {
            max-width: 80%;
            padding: 0.8rem;
            border-radius: 18px;
            line-height: 1.4;
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--user-bubble);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            align-self: flex-start;
            background-color: var(--bot-bubble);
            border-bottom-left-radius: 5px;
        }

        .input-area {
            display: flex;
            padding: 1rem;
            border-top: 1px solid var(--border);
        }

        .input-area input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid var(--border);
            border-radius: 25px;
            outline: none;
            font-size: 1rem;
        }

        .input-area button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 0.8rem 1.5rem;
            margin-left: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .input-area button:hover {
            background-color: #2a75e5;
        }

        .news-card {
            background-color: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .news-card:hover {
            transform: translateY(-2px);
        }

        .news-card h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .news-card p {
            font-size: 0.85rem;
            color: var(--light-text);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-card .date {
            font-size: 0.75rem;
            color: var(--light-text);
            margin-top: 0.5rem;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.75rem;
            color: var(--light-text);
        }

        h2 {
            margin-bottom: 1rem;
            font-size: 1.2rem;
            color: var(--text);
        }

        .typing-indicator {
            display: flex;
            padding: 0.8rem;
            background-color: var(--bot-bubble);
            border-radius: 18px;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            margin-bottom: 0.5rem;
        }

        .typing-indicator span {
            height: 8px;
            width: 8px;
            background-color: var(--light-text);
            border-radius: 50%;
            display: inline-block;
            margin: 0 2px;
            animation: bounce 1.3s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.15s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.3s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 1px solid var(--border);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>AI Chart Bot</h1>
        <p>Analyzing News Data with AI Intelligence</p>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <h2>Recent News Analysis</h2>
            <div id="news-cards"></div>
        </div>
        
        <div class="main-content">
            <div class="chart-container">
                <canvas id="newsChart"></canvas>
            </div>
            
            <div class="chat-container">
                <div class="chat-messages" id="chat-messages">
                    <div class="message bot-message">
                        Hello! I'm your AI Chart Bot. I can help you analyze news data and answer questions about the provided dataset. Try asking about companies, acquisitions, or trends in the news.
                    </div>
                </div>
                
                <div class="input-area">
                    <input type="text" id="user-input" placeholder="Ask about the news data...">
                    <button id="send-btn">Send</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // News data from the provided dataset
        const newsData = [
            {
                "url": "https://www.perplexity.ai/page/uk-clears-boeing-47-billion-sp-vh9yzOZJSdO4Z9V8iJI7Jw",
                "timestamp": "2025-08-08T10:31:45.787Z",
                "title": "UK clears Boeing's $4.7B Spirit AeroSystems acquisition",
                "description": "The UK's Competition and Markets Authority has cleared Boeing's $4.7 billion acquisition of Spirit AeroSystems after determining the deal would not harm competition.",
                "wordCount": 168,
                "linkCount": 0
            },
            {
                "url": "https://www.perplexity.ai/page/take-two-reports-q1-surge-with-Yh.enLhIQXOlapEa8ipwpg",
                "timestamp": "2025-08-08T09:58:34.366Z",
                "title": "Take-Two reports Q1 surge with $1.42B in net bookings",
                "description": "Take-Two Interactive delivered a commanding Q1 2026 performance with net bookings surging 17% to $1.42 billion, significantly exceeding expectations.",
                "wordCount": 174,
                "linkCount": 10
            },
            {
                "url": "https://www.perplexity.ai/page/chagos-study-shows-large-mpas-ikzemLFHQJG_.WlYlfoA9w",
                "timestamp": "2025-08-08T09:56:18.331Z",
                "title": "Study proves massive ocean reserves protect 95% of marine life",
                "description": "A new study of the Chagos Archipelago Marine Protected Area has provided compelling evidence that massive ocean reserves can effectively safeguard marine life.",
                "wordCount": 168,
                "linkCount": 0
            }
        ];

        // Initialize Chart.js
        const ctx = document.getElementById('newsChart').getContext('2d');
        const newsChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: newsData.map(item => item.title.substring(0, 20) + '...'),
                datasets: [{
                    label: 'Word Count',
                    data: newsData.map(item => item.wordCount),
                    backgroundColor: 'rgba(58, 134, 255, 0.7)',
                    borderColor: 'rgba(58, 134, 255, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'News Article Analysis',
                        font: {
                            size: 16
                        }
                    },
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Word Count'
                        }
                    }
                }
            }
        });

        // Render news cards
        const newsCardsContainer = document.getElementById('news-cards');
        newsData.forEach(item => {
            const date = new Date(item.timestamp);
            const formattedDate = date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric'
            });
            
            const card = document.createElement('div');
            card.className = 'news-card';
            card.innerHTML = `
                <h3>${item.title}</h3>
                <p>${item.description}</p>
                <div class="date">${formattedDate}</div>
                <div class="stats">
                    <span>üìù ${item.wordCount} words</span>
                    <span>üîó ${item.linkCount} links</span>
                </div>
            `;
            newsCardsContainer.appendChild(card);
        });

        // Chat functionality
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');

        // Add message to chat
        function addMessage(text, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Show typing indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typing-indicator';
            typingDiv.innerHTML = '<span></span><span></span><span></span>';
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Hide typing indicator
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // AI response logic
        function getAIResponse(question) {
            const lowerQuestion = question.toLowerCase();
            
            if (lowerQuestion.includes('boeing') || lowerQuestion.includes('spirit')) {
                return "The UK's Competition and Markets Authority has approved Boeing's $4.7 billion acquisition of Spirit AeroSystems. The deal was cleared after regulators determined it wouldn't harm market competition. This acquisition is part of Boeing's strategy to strengthen its supply chain and manufacturing capabilities.";
            }
            
            if (lowerQuestion.includes('take-two') || lowerQuestion.includes('q1') || lowerQuestion.includes('earnings')) {
                return "Take-Two Interactive reported strong Q1 2026 results with net bookings surging 17% to $1.42 billion, significantly exceeding expectations. This growth was driven by successful game releases and strong performance in their recurrent consumer spending segment. The company also raised its full-year guidance based on these results.";
            }
            
            if (lowerQuestion.includes('ocean') || lowerQuestion.includes('marine') || lowerQuestion.includes('reserve')) {
                return "A new study on the Chagos Archipelago Marine Protected Area shows that large ocean reserves can effectively protect marine biodiversity. The research demonstrated that these protected areas safeguard approximately 95% of marine species within their boundaries. This provides compelling evidence for the effectiveness of massive ocean conservation efforts.";
            }
            
            if (lowerQuestion.includes('trend') || lowerQuestion.includes('analysis') || lowerQuestion.includes('insight')) {
                return "Based on the news data, key trends include:\n1. Regulatory approvals for major acquisitions (Boeing/Spirit)\n2. Strong earnings in the gaming sector (Take-Two)\n3. Environmental conservation breakthroughs (Ocean reserves study)\n\nThese stories reflect ongoing business consolidation, entertainment industry resilience, and scientific advancements in conservation.";
            }
            
            if (lowerQuestion.includes('help') || lowerQuestion.includes('what can you do')) {
                return "I can help you analyze news data! Try asking about:\n- Boeing's acquisition of Spirit AeroSystems\n- Take-Two's Q1 earnings report\n- Marine conservation research\n- Trends in the dataset\n\nYou can also ask for data analysis or chart interpretations.";
            }
            
            return "I'm an AI chart bot specialized in news data analysis. I can answer questions about Boeing's acquisition, Take-Two's earnings, marine conservation research, and provide insights on trends in the dataset. Try asking about one of these topics!";
        }

        // Handle user input
        function handleUserInput() {
            const question = userInput.value.trim();
            if (!question) return;
            
            // Add user message
            addMessage(question, true);
            userInput.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate AI processing time
            setTimeout(() => {
                hideTypingIndicator();
                const response = getAIResponse(question);
                addMessage(response, false);
            }, 1500);
        }

        // Event listeners
        sendBtn.addEventListener('click', handleUserInput);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleUserInput();
            }
        });

        // Initialize with sample question
        setTimeout(() => {
            addMessage("Can you tell me about Boeing's acquisition?", false);
        }, 1000);
    </script>
</body>
</html>